# SonarQube Configuration for Gatewayz Backend
# Documentation: https://docs.sonarqube.org/latest/analysis/analysis-parameters/

# Project identification
sonar.projectKey=gatewayz-backend
sonar.projectName=Gatewayz Universal Inference API Backend
sonar.projectVersion=2.0.3
sonar.organization=gatewayz

# Source code configuration
sonar.sources=src
sonar.tests=tests
sonar.inclusions=**/*.py
sonar.exclusions=**/__pycache__/**,**/.*,**/venv/**,**/env/**,**/build/**,**/dist/**,scripts/,scripts/**,scripts/integration-tests/**

# Python-specific settings
sonar.python.version=3.12
sonar.python.coverage.reportPaths=coverage.xml
sonar.python.pylint_config=.pylintrc

# Security-focused rules
sonar.security.hotspots.coverage.minimum=80
sonar.security.exclude_frontends=false

# Code coverage
sonar.coverage.exclusions=\
  tests/**,\
  **/test_*.py,\
  **/*_test.py,\
  **/conftest.py,\
  src/main.py,\
  scripts/,\
  scripts/**,\
  scripts/integration-tests/**

sonar.coverage.coverageMetric=coverage

# Duplications and complexity
# IMPORTANT: Exclude scripts directory and provider clients from duplication detection
# Provider clients follow a standardized pattern for response processing and will have
# similar import/call patterns when refactored to use shared utilities
# Scripts directory also includes Google models validation scripts
sonar.cpd.exclusions=**/test_*.py,**/*_test.py,scripts/,scripts/**,scripts/integration-tests/**,src/services/*_client.py

# Issue severity levels and exclusions
sonar.issue.ignore.multicriteria=e1,e2,e3
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S101
sonar.issue.ignore.multicriteria.e1.resourceKey=**/test_*.py
sonar.issue.ignore.multicriteria.e2.ruleKey=python:S101
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*_test.py
# Exclude duplication check for provider client files (they use shared utility pattern)
sonar.issue.ignore.multicriteria.e3.ruleKey=common-duplicated-blocks
sonar.issue.ignore.multicriteria.e3.resourceKey=src/services/*_client.py

# GitHub-specific integration (if using GitHub)
# sonar.github.repository=gatewayz-org/gatewayz-backend
# sonar.github.pullRequest=${PULL_REQUEST_NUMBER}

# GitLab-specific integration (if using GitLab)
# sonar.gitlab.project_id=${CI_PROJECT_ID}
# sonar.gitlab.commit_sha=${CI_COMMIT_SHA}
# sonar.gitlab.ref_name=${CI_COMMIT_REF_NAME}

# Quality gates
sonar.qualitygate.wait=true

# Additional analysis parameters
sonar.links.homepage=https://gatewayz.ai
sonar.links.scm=https://github.com/gatewayz/gatewayz-backend
sonar.scm.provider=git
sonar.scm.forceDetection=true
