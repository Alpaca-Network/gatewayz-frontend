â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   RAILWAY GITHUB ACTIONS DEPLOYMENT PIPELINE                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TRIGGER EVENTS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ Push to main branch   â†’ Auto-deploy to PRODUCTION                        â”‚
â”‚  â€¢ Push to staging branch â†’ Auto-deploy to STAGING                          â”‚
â”‚  â€¢ Manual trigger        â†’ Choose environment (staging/production)          â”‚
â”‚  â€¢ Workflow run          â†’ After CI/CD Pipeline succeeds                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PIPELINE EXECUTION:

                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚  Event Trigger      â”‚
                            â”‚  (push / manual)    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  setup                      â”‚
                        â”‚  Determine environment      â”‚
                        â”‚  â±ï¸  ~1 minute              â”‚
                        â”‚  â€¢ Check branch            â”‚
                        â”‚  â€¢ Set environment         â”‚
                        â”‚  â€¢ Output env variables    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  checkout-and-setup        â”‚
                        â”‚  â±ï¸  ~2 minutes             â”‚
                        â”‚  â€¢ Checkout code           â”‚
                        â”‚  â€¢ Setup Python 3.12       â”‚
                        â”‚  â€¢ Configure pip cache     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  install-dependencies      â”‚
                        â”‚  â±ï¸  ~3-4 minutes           â”‚
                        â”‚  â€¢ Install requirements    â”‚
                        â”‚  â€¢ Install dev packages    â”‚
                        â”‚  â€¢ Verify imports          â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  test                      â”‚
                        â”‚  â±ï¸  ~3-5 minutes           â”‚
                        â”‚  â€¢ Run pytest suite        â”‚
                        â”‚  â€¢ Generate coverage       â”‚
                        â”‚  â€¢ Upload to Codecov       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  build                     â”‚
                        â”‚  â±ï¸  ~2-3 minutes           â”‚
                        â”‚  â€¢ Verify files exist      â”‚
                        â”‚  â€¢ Check Python syntax     â”‚
                        â”‚  â€¢ Validate config         â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  deploy                    â”‚
                        â”‚  â±ï¸  ~3-5 minutes           â”‚
                        â”‚  â€¢ Install Railway CLI     â”‚
                        â”‚  â€¢ Link to service         â”‚
                        â”‚  â€¢ Execute: railway up     â”‚
                        â”‚  â€¢ Detach process          â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  health-check              â”‚
                        â”‚  â±ï¸  ~5-10 minutes          â”‚
                        â”‚  â€¢ Wait for deployment     â”‚
                        â”‚  â€¢ Check /health endpoint  â”‚
                        â”‚  â€¢ Retry up to 6 times     â”‚
                        â”‚  â€¢ Report status           â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  summary                   â”‚
                        â”‚  â±ï¸  ~1 minute              â”‚
                        â”‚  â€¢ Generate report        â”‚
                        â”‚  â€¢ Show deployment status  â”‚
                        â”‚  â€¢ Provide next steps      â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                                â”‚   Success!   â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TOTAL EXECUTION TIME: 25-35 minutes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DEPLOYMENT TIMELINE (Example):

Time    â”‚ Action
â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
00:00   â”‚ âœ… Push to main/staging branch
00:01   â”‚ âœ… GitHub Actions triggered
00:02   â”‚ âœ… setup job starts
00:03   â”‚ âœ… checkout-and-setup job starts
00:05   â”‚ âœ… install-dependencies job starts
00:08   â”‚ âœ… test job starts
        â”‚    (running: pytest tests/ --cov=src)
00:13   â”‚ âœ… build job starts
        â”‚    (verifying files and syntax)
00:15   â”‚ âœ… deploy job starts
        â”‚    (installing Railway CLI)
00:17   â”‚ âœ… railway up command executes
00:19   â”‚ âœ… health-check job starts
        â”‚    (waiting for deployment)
00:21   â”‚ âœ… health-check retries (if needed)
00:27   â”‚ âœ… /health endpoint returns 200 OK
00:28   â”‚ âœ… summary job completes
        â”‚
00:30   â”‚ ğŸ‰ Deployment complete! Application live.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ENVIRONMENT ROUTING:

                              Push Event
                                  â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                   â”‚
                   Branch: main          Branch: staging
                        â”‚                   â”‚
                        â–¼                   â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ PRODUCTION â”‚      â”‚  STAGING   â”‚
                   â”‚ Environmentâ”‚      â”‚ Environmentâ”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MANUAL TRIGGER:

                        workflow_dispatch
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Choose Environment  â”‚
                    â”‚ â€¢ staging           â”‚
                    â”‚ â€¢ production        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
                        â”‚   Deploy  â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

HEALTH CHECK RETRY LOGIC:

                    First health check
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ GET /health     â”‚
                    â”‚ Wait 90 seconds â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                   â”‚
            HTTP 200              Other status
              (Success)            (Failed)
                  â”‚                   â”‚
                  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚         â”‚ Retry Check       â”‚
                  â”‚         â”‚ Max 6 attempts    â”‚
                  â”‚         â”‚ 30s between       â”‚
                  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                  â”‚
                  â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚      â”‚                       â”‚
                  â”‚   All retries              200 OK
                  â”‚   exhausted                   â”‚
                  â”‚      â”‚                       â”‚
                  â”‚      â–¼                       â–¼
                  â”‚   âŒ Failed               âœ… Success
                  â”‚                               â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                            â”‚  Summary    â”‚
                            â”‚  Report     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE DEPENDENCIES:

GitHub Actions
â”œâ”€â”€ .github/workflows/deploy-railway-cli.yml (Main workflow)
â”‚
Application
â”œâ”€â”€ src/main.py (FastAPI entry point)
â”œâ”€â”€ requirements.txt (Dependencies)
â”œâ”€â”€ requirements-dev.txt (Dev dependencies)
â”œâ”€â”€ start.sh (Startup script)
â”‚
Railway Config
â”œâ”€â”€ railway.json (Builder config)
â”œâ”€â”€ railway.toml (Service config)
â”‚
Documentation
â”œâ”€â”€ docs/RAILWAY_DEPLOYMENT.md (Full guide)
â”œâ”€â”€ docs/RAILWAY_SETUP_CHECKLIST.md (Setup steps)
â”œâ”€â”€ docs/RAILWAY_QUICK_REFERENCE.md (Quick commands)
â”‚
Setup
â””â”€â”€ scripts/setup-railway-deployment.sh (Setup script)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SUCCESS INDICATORS:

âœ… Workflow Status:
   â€¢ All 8 jobs completed successfully
   â€¢ No red X marks in job list
   â€¢ Summary shows green checkmarks

âœ… Test Results:
   â€¢ All tests pass
   â€¢ Coverage report generated
   â€¢ No failures or errors

âœ… Deployment:
   â€¢ Railway CLI links successfully
   â€¢ railway up command completes
   â€¢ No deployment errors in logs

âœ… Health Check:
   â€¢ /health endpoint returns HTTP 200
   â€¢ Response contains {"status":"ok"}
   â€¢ Check completes within 10 minutes

âœ… Final State:
   â€¢ Application is live on Railway
   â€¢ Can access at: [PRODUCTION_URL] or [STAGING_URL]
   â€¢ Logs show "Application ready"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FAILURE POINTS & RECOVERY:

âŒ setup fails
   â†’ Check branch is main or staging
   â†’ Fix and re-push

âŒ install-dependencies fails
   â†’ Missing dependency in requirements.txt
   â†’ Fix locally, run: pip install -r requirements-dev.txt
   â†’ Test and re-push

âŒ test fails
   â†’ Tests not passing
   â†’ Fix locally: pytest tests/ -v
   â†’ Ensure all pass before push

âŒ build fails
   â†’ Missing deployment files
   â†’ Missing: railway.json, railway.toml, requirements.txt, start.sh
   â†’ Add files and commit

âŒ deploy fails
   â†’ RAILWAY_TOKEN not configured
   â†’ Add secret to GitHub and retry
   â†’ Or manually set: gh secret set RAILWAY_TOKEN

âŒ health-check fails
   â†’ Application not starting
   â†’ Check Railway logs for errors
   â†’ Verify environment variables set
   â†’ Check /health endpoint exists

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
