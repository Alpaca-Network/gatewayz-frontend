# Error Monitoring System Configuration
# Copy this file to .env and fill in your actual values
# DO NOT commit secrets to git!

# =====================================
# Claude API (REQUIRED for fix generation)
# =====================================
# Get your key from https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-...

# =====================================
# GitHub API (REQUIRED for PR creation)
# =====================================
# Create a GitHub Personal Access Token:
# 1. Go to https://github.com/settings/tokens
# 2. Click "Generate new token (classic)"
# 3. Select scopes: repo, workflow
# 4. Copy the token
GITHUB_TOKEN=ghp_...

# =====================================
# Loki Log Aggregation (Optional)
# =====================================
# Enable Loki integration for log monitoring
LOKI_ENABLED=false
# URL to your Loki instance
LOKI_PUSH_URL=https://your-loki-instance/loki/api/v1/push

# =====================================
# Error Monitoring Configuration
# =====================================
# Enable the error monitoring system
ERROR_MONITORING_ENABLED=true

# Enable automatic fix generation
AUTO_FIX_ENABLED=true

# Scan interval for Railway logs (in seconds)
ERROR_MONITOR_INTERVAL=300  # 5 minutes

# Look back this many hours when scanning logs
ERROR_MONITOR_LOOKBACK_HOURS=1

# Maximum errors to process per scan
ERROR_MONITOR_MAX_ERRORS=100

# =====================================
# Auto-Fix Configuration
# =====================================
# Automatically create GitHub PRs
AUTO_FIX_CREATE_PRS=true

# Repository for auto-fix PRs (owner/repo)
AUTO_FIX_REPO=terragon-labs/gatewayz

# Base branch for PRs
AUTO_FIX_BASE_BRANCH=main

# =====================================
# Railway Configuration
# =====================================
# Service to monitor (leave empty to monitor all)
RAILWAY_SERVICE=api

# Poll interval in seconds
RAILWAY_POLL_INTERVAL=60

# Log lines to fetch per poll
RAILWAY_LOG_LINES=100

# =====================================
# Severity Thresholds
# =====================================
# Minimum severity to generate fixes
# Options: critical, high, medium, low, info
ERROR_FIX_MIN_SEVERITY=high

# Minimum error count before generating fix
ERROR_FIX_MIN_COUNT=3

# =====================================
# Claude API Settings
# =====================================
# Model to use for analysis
CLAUDE_MODEL=claude-opus-4-1-20250805

# Max tokens for error analysis
CLAUDE_MAX_TOKENS_ANALYSIS=1024

# Max tokens for fix generation
CLAUDE_MAX_TOKENS_FIX=2048

# Temperature for fix generation (0.0-1.0, lower = more deterministic)
CLAUDE_TEMPERATURE=0.3

# =====================================
# Notification Settings
# =====================================
# Slack webhook for critical errors (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Email for critical errors (optional)
ALERT_EMAIL=devops@example.com

# =====================================
# Rate Limiting
# =====================================
# Max API calls per minute to Claude
CLAUDE_RATE_LIMIT_PER_MIN=20

# Max PRs to create per hour
PR_CREATION_RATE_LIMIT_PER_HOUR=10

# =====================================
# Logging
# =====================================
# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Log file path
LOG_FILE=/var/log/gatewayz-error-monitor.log

# =====================================
# Feature Flags
# =====================================
# Dry-run mode (don't create actual PRs)
DRY_RUN=false

# Verbose logging
VERBOSE=false

# Debug mode
DEBUG=false
